---
description: AWS IAM
tags:
  - AWS
  - Cloud
date: 2025-11-18
modified: 2025-11-18
draft: true
stage:
  - 초안
---
## 인증 및 권한 부여
계정에 대한 액세스를 구성할 때 인증과 권한 부여라는 두 용어가 자주 나타난다. 이러한 용어가 기본 개념으로 보일 수 있지만 AWS에서 액세스 관리를 올바르게 구성하려면 해당 용어를 완전히 이해해야 한다.

### 인증
AWS 계정을 생성할 때 이메일 주소와 암호의 조합을 사용하여 자격 증명을 확인한다. 사용자가 올바른 이메일 주소와 암호를 입력하면 시스템은 입장해도 된다고 가정하고 액세스 권한을 부여한다. 이것이 인증 프로세스이다.

### 권한 부여
인증을 받아 AWS 계정에 들어가면 어떤 작업을 할 수 있는지 궁금할 것이다. 이떄 필요한 것이 권한 부여이다. 권한 부여는 사용자에게 AWS 리소스 및 서비스에 액세스할 수 있는 권한을 부여하는 프로세스이다. 권한 부여는 사용자가 읽기, 편집, 삭제 또는 리소스 생성과 같은 특정 작업을 수행할 수 있는지 여부를 결정한다. 권한 부여는 어떤 작업을 수행할 수 있는지 결정한다.
허가를 통해 할 수 있거나 없는 작업을 제어하는 것이 권한 부여

## IAM이란?
AWS IAM은 AWS 계정 및 리소스에 대한 액세스를 관리하는 데 도음이 되는 AWS 서비스이다. 또한 AWS 계정 내에서 허용되는 사람과 작업(인증), AWS 리소스를 사용하고 작업을 수행할 권한이 있는 사람 및 주체(권한 부여)를 중앙 집중화하여 보여준다.
IAM을 사용하면 액세스 키 또는 암호 집합을 공유하지 않고도 AWS 계정 및 리소스에 대한 액세스 권한을 공유할 수 있다. 또한 사용자 및 서비스가 필요한 리소스에 대한 권한만 갖도록 계정에 세분화된 액세스 권한을 제공할 수 있다.

## IAM 기능
글로벌 서비스
- IAM은 특정 리전이 아니라 전 세계에서 사용 가능하다.
AWS 서비스와 통합
- IAM은 여러 AWS 서비스와 통합할 수 있다.
공유 액세스
- 암호, 키를 공유하지 않고도 다른 주체에게 AWS 계정의 리소스 관리 및 사용 권한을 부여할 수 있다.
다중 인증
- IAM은 MFA를 지원한다. 보안을 강화하기 위해 MFA를 계정과 사용자에게 추가 적용할 수 있다.
 ID 페더레이션
 -  IAM은 ID 페더레이션을 지원한다. ID 페더레이션은 다른 위치에서 암호를 보유한 사용자가 AWS 계정에 임시로 액세스하도록 허용한다.
무료
- IAM은 무료로 이용 가능하다.

## IAM User
IAM 사용자는 AWS와 상호 작용하는 사람 또는 서비스를 의미한다. AWS 계정에서 사용자를 정의할 수 있다. 해당 사용자가 수행한 모든 활동에 대해 계정에서 비용이 청구된다. 사용자를 생성하면 해당 사용자는 로그인하여 계정 내의 AWS 리소스에 액세스할 수 있다.
필요에 따라 계정에 사용자를 더 추가할 수도 있다. 사용자 간에 자격 증명이 공유되지 않도록 각자 별도의 로그인 자격 증명을 갖는다.

## IAM 사용자 자격 증명
 IAM 사용자는 이름과 일련의 자격 증명으로 구성된다. 사용자를 생성할 때 사용자에 AWS Management Console 액세스, AWS CLI 및 AWS API에 대한 프로그래밍 방식 액세스를 제공할 수 있다.
콘솔에 액세스하려면 사용자에게 사용자 이름과 암호를 제공해야 한다. 프로그래밍 방식 액세스를 위해 AWS는 AWS CLI 및 AWS API에 사용할 수 있는 액세스 키 집합을 생성한다. IAM 사용자 자격 증명은 영구적인 것으로 간주되므로 관리자가 강제 교체할 때까지 사용자와 함께 유지된다.
IAM 사용자를 생성할 때 사용자 수준에서 직접 권한을 부여할 수 있다. 사용자가 적을 때에는 이 방법이 좋겠지만 사용자 수가 증가하면 각각 권한을 부여하는 것이 복잡해질 수 있다. 

이러한 문제를 해결하기 위해 IAM 사용자를 그룹화하고 그룹 수준에서 권한을 연결할 수 있다.

## IAM 그룹
IAM 그룹은 사용자의 그룹이다. 그룹에 할당된 권한은 그룹에 속한 모든 사용자에게 상속된다. IAM 그룹을 사용하면 한 번에 여러 사용자에게 권한을 부여할 수 있으므로 AWS 계정의 사용자에 대한 권한을 편리하게 관리할 수 있다.
구축하려는 애플리케이션에서 한 계정에 애플리케이션에서 작업하는 사용자가 여러명인 경우 직무별로 사용자를 구성할 수 있다. (예: 개발자 그룹, 보안 및 관리자 그룹 생성 후 각각 그룹에 배치)
그러면 조직에서 누구에게 어떤 권한이 있는지 확인하기 쉽다. 또한 조직에 새로운 사람이 입사/되사할 때 역할을 조정하는 데도 도움이 된다.

그룹의 특징
- 많은 사용자가 포함될 수 있다.
- 사용자는 여러 그룹에 속할 수 있다.
- 그룹은 다른 그룹에 속할 수 있다.
 정책을 특정 사용자 또는 그룹에 연결할 수 있다. 그룹에 정책을 연결하면 해당 그룹에 속한 모든 사용자가 권한을 상속한다. 사용자를 그룹으로 구성하고 가능하면 개별 사용자 대신 그룹에 권한을 할당하는 것을 모범 사례로 권장한다. 이렇게 하면 사람들의 직책이 바뀌거나 여러 사용자에게 권한을 적용하거나 취소할 때 관리가 더 쉽다.

다른 모범 사례로 AWS 계정을 만들 때 루트 사용자에 MFA를 설정하는 것을 권장한다. 그런 다음 관리자 권한이 있는 IAM 사용자를 만들고 루트 사용자에서 로그아웃한 다음 조금 전에 생성한 IAM 사용자로 로그인한다. 이 사용자를 사용해서 나머지 IAM 그룹, 사용자, 정책을 생성하는 것이 좋다.
이 방법을 권장하는 이유는 루트 사용자에게는 정책을 적용할 수 없지만 IAM 사용자에게는 적용할 수 있기 때문이다.

## IAM 정책
액세스를 관리하고 AWS 서비스 및 리소스에 대한 권한을 제공하려면 IAM 정책을 생성하여 IAM 자격 증명에 연결한다. IAM 자격 증명이 요청을 할 때마다 AWS는 해당 자격 증명과 관련된 정책을 평가하여 요청을 허용해야 하는지, 거부해야 하는지 확인한다.

### IAM 정책 예시
대부분의 정책은 JSON 문서로 저장된다.

~~~JSON
{
"Version": "2012-10-17",
"Statement": [{
"Effect": "Allow",
"Action": "*",
"Resource": "*"
}]
}
~~~
위 정책 예시에는 Version, Effect, Action, Resource라는 4가지 주요 JSON 요소가 있다.
Version
- 정책 언어의 버전을 정의한다. AWS 가 정책을 처리하는 데 필요한 언어 구문 규칙을 지정한다.
Effect
- 정책이 액세스를 허용할지 또는 거부할지를 지정한다. "Allow"는 특정 리소스에 대한 액세스를 제공한다는 뜻이다.
Action
- 허용하거나 거부해야 하는 작업 유형을 설명한다. "\*"은 와일드카드라고 하며 AWS 계정 내의 모든 작업을 상징한다.
Resource
- 스테이트먼트에서 다루는 객체를 지정한다.

위의 정책은 AWS 계정의 모든 리소스에 대해 모든 작업을 수행할 수 있도록 허용하는 정책임을 알 수 있고 이를 관리가 정책이라고 한다.

~~~JSON
{
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "DenyS3AccessOutsideMyBoundary",
      "Effect": "Deny",
      "Action": [
        "s3:*"
      ],
      "Resource": "*",
      "Condition": {
        "StringNotEquals": {
          "aws:ResourceAccount": [
            "222222222222"
          ]
        }
      }
    }
  ]
}
}
~~~
이 정책은 Deny를 사용하여 Amazon S3 작업에 대한 액세스를 차단한다. 단, 예외는 액세스 되는 Amazon S3 리소스가 "222222222222"라는 계정에 있는 경우이다. 이렇게 하면 Amazon S3 주체가 신뢰할 수 있는 AWS 계정 내에 있는 리소스에만 액세스하도록 할 수 있다.

## IAM 역할
IAM 역할은 AWS 자격 증명에 임시 액세스가 필요한 사람이나 주체가 수임할 수 있는 자격 증명이다.
대부분의 AWS API 호출은 서명과 인증이 필요한데, 이 프로세스는 어떻게 작동할까?
AWS에 HTTP 요청을 보낼 때 요청에 서명을 해야 한다. 이 서명 프로세스는 프로그래밍 방식으로 이루어지며, 요청이 수행되고 다양한 보안 프로세스를 거쳐 실행될 때 요청이 정당한지 확인하기 위해 AWS가 여러분의 자격 증명을 검증하도록 허용한다. IAM 사용자에게는 액세스 키 ID와 요청에 서명하는 데 사용되는 비밀 액세스 키 같은 자격 증명이 연결되어 있다. 그러나 AWS 아키텍처에서는 EC2 인스턴스에서 실행되는 코드가 S3에 전송되는 요청에 서명해야 한다. 애플리케이션이 API 호출에 서명하는 데 필요한 AWS 액세스 키 ID와 AWS 비밀 액세스 키에 대한 액세스 권한을 어떻게 얻을 수 있을까요? 답은 IAM 역할입니다.
IAM 역할은 IAM 사용자와 마찬가지로 AWS에 있는 자격 증명이며 요청에 서명하는 데 사용되는 AWS 자격 증명 또한 연결되어 있습니다. 그러나 IAM 사용자에게는 사용자 이름과 암호와 함께 정적 자격 증명이 있는 반면, IAM 역할에게는 사용자 이름과 암호 같은 로그인 자격 증명이 없습니다. 요청에 서명하는 데 사용되는 자격 증명은 프로그래밍 방식으로 확보되며 일시적이고 자동으로 교체됩니다.
역할에 대해 꼭 알아 둬야 할 점은 역할이 제공하는 자격 증명은 만료되며, 프로그래밍 방식으로 수임된다는 것입니다

## IAM 모범 사례
AWS 루트 사용자 잠그기
- 루트 사용자는 AWS 계정의 모든 권한을 가진 자격 증명이다. 따라서 안전하게 관리해야 한다.
	- 루트 사용자와 연결된 자격 증명을 누구와도 공유하지 않는다.
	- 루트 사용자 액세스 키를 삭제하는 것을 고려한다.
	- 루트 계정에서 MFA를 활성화한다.
최소 권한의 원칙 준수
- 최소 권한은 특정 작업을 수행하는 데 필요한 권한만 부여하도록 권장하는 표준 보안 원칙이다. 액세스 제어에 대한 최소 권한을 구현하려면 IAM 정책의 최소 권한 집합부터 시작한 다음, 필요에 따라 사용자, 그룹 또는 역할에 추가 권한을 부여한다.
적절한 IAM 사용
- IAM은 AWS 계정 및 리소스에 대한 액세스를 보호하는 데 사용된다. 하나의 AWS 계정에서 리소스의 액세스하기 위해 사용자, 그룹 및 역할을 생성하고 관리하는 방법을 제공한다. IAM은 웹 사이트 사용자에게 로그인 및 가입 기능을 제공하는 것과 같이 웹 사이트 인증 및 권한 부여에 사용되지 않는다. 또한 IAM은 운영 체제 및 네트워크 보호를 위한 보안 제어도 지원하지 않는다.
가능한 경우 IAM 역할 사용
- 역할을 유지 관리하는 것이 사용자를 유지 관리하는 것보다 더 효율적이다. 역할은 15분~36시간 사이로 정의된 기간이 경과하면 만료되는 임시 자격 증명을 동적으로 제공한다. 사용자는 사용자 이름 및 암호 조합 또는 액세스 키 잡합의 형태로 장기간 사용되는 자격 증명이다.
- 사용자 액세스 키는 계정 관리자가 키를 교체할 때만 만료된다. 사용자가 암호를 강제로 교체하도록 암호 정책을 계정에 적용하면 사용자 로그인 자격 증명이 만료된다.
자격 증명 공급자 사용 고려
- IdP를 사용하면 AWS서비스 든, 서드 파티 자격 증명 공급자든 조직의 모든 자격 증명에 대해 신뢰할 수 있는 단일 소스를 갖게 된다.
- 더 이상 AWS에서 별도의 IAM 사용자를 생성할 필요가 없다. 대신 IAM 역할을 사용하여 IdP에서 페더레이션된 자격 증명에 권한을 제공할 수 있다. 연동은 자격 증명과 인증 정보를 네트워킹된 시스템에 집합을 거쳐 전송할 수 있는 프로세스이다.
사용하지 않는 사용자, 역할, 자격 증명을 주기적으로 검토하고 제거
- 계정에서 더 이상 사용하지 않는 IAM 사용자, 역할, 권한, 정책, 자격 증명이 있을 수 있다. IAM은 더 이상 필요하지 않은 자격 증명을 찾아 제거할 수 있도록 마지막 액세스에 대한 정보를 제공한다. 이 정보를 통해 필요하지 않은 사용자, 역할, 자격 증명을 제거할 수 있다.



---
## Reference
- AWS Skill Builder, "AWS Techincal Essentials"